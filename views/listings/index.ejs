<% layout("/layouts/boilerplate") %>

<style>
	.filter-item p {
		margin: 0;
		font-size: 0.8rem;
	}

	#all-filters {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		justify-content: space-around;
	}

	.filter-scrollbar {
		width: 79%;
		background-color: #fff;
		border-bottom: 1px solid #e0e0e0;
		padding: 10px 0;
		position: sticky;
		top: 0;
		z-index: 100;
	}

	.filter-scroll {
		overflow-x: auto;
		overflow-y: hidden;
		white-space: nowrap;
		padding: 0 15px;
		scrollbar-width: none;
		-ms-overflow-style: none;
	}

	.filter-scroll::-webkit-scrollbar {
		display: none;
	}

	.filter-item {
		display: inline-block;
		padding: 8px 16px;
		margin-right: 10px;
		text-decoration: none;
		color: #666;
		border: 1px solid #ddd;
		border-radius: 20px;
		font-size: 14px;
		font-weight: 500;
		transition: all 0.3s ease;
		white-space: nowrap;
	}

	.filter-item:hover {
		background-color: #f0f0f0;
		border-color: #999;
	}

	.filter-item.active {
		background-color: #ff5a5f;
		color: white;
		border-color: #ff5a5f;
	}
	.tax-info {
		font-size: 14px;
		color: #666;
		margin-top: 5px;
	}

	@media only screen and (max-width: 768px) {
		.tax-info {
			font-size: 12px;
			margin-top: 3px;
		}
	}

	@media only screen and (max-width: 480px) {
		.tax-info {
			font-size: 11px;
			margin-top: 2px;
			text-align: center;
		}
	}

	@media only screen and (max-width: 320px) {
		.tax-info {
			font-size: 10px;
			margin-top: 1px;
		}
	}

	.tax-toggle {
		width: 20%;
		border: 1px solid black;
		border-radius: 1rem;
		height: 3.25rem;
		padding: 1rem;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	/* Tax button styling */
	.tax-button {
		background-color: transparent;
		border: 1px solid #ddd;
		padding: 4px 8px;
		font-size: 12px;
		color: #666;
		border-radius: 4px;
		cursor: pointer;
		margin-top: 5px;
		transition: all 0.3s ease;
	}

	.tax-button:hover {
		background-color: #f5f5f5;
		border-color: #999;
	}
</style>

<div id="all-filters">
	<div class="filter-scrollbar">
		<div class="filter-scroll">
			<a href="#trending" class="filter-item active">
				<p><i class="fa-solid fa-fire"></i>&nbsp;Trending</p></a
			>
			<a href="#rooms" class="filter-item">
				<p><i class="fa-solid fa-bed"></i>&nbsp;Rooms</p>
			</a>
			<a href="#iconic-cities" class="filter-item">
				<p><i class="fa-solid fa-mountain-city"></i>&nbsp;Iconic Cities</p>
			</a>
			<a href="#mountains" class="filter-item">
				<p><i class="fa-solid fa-mountain"></i>&nbsp;Mountains</p>
			</a>
			<a href="#castles" class="filter-item">
				<p><i class="fa-solid fa-chess-rook"></i>&nbsp;Castles</p>
			</a>
			<a href="#amazing-pools" class="filter-item"
				><p><i class="fa-solid fa-person-swimming"></i>&nbsp;Amazing Pools</p>
			</a>
			<a href="#camping" class="filter-item"
				><p><i class="fa-solid fa-tent"></i>&nbsp;Camping</p>
			</a>
			<a href="#farms" class="filter-item"
				><p><i class="fa-solid fa-tractor"></i>&nbsp;Farms</p></a
			>
			<a href="#arctic" class="filter-item"
				><p><i class="fa-solid fa-snowflake"></i>&nbsp;Arctic</p></a
			>
			<a href="#domes" class="filter-item"
				><p><i class="fa-solid fa-igloo"></i>&nbsp;Domes</p></a
			>
			<a href="#boats" class="filter-item"
				><p><i class="fa-solid fa-sailboat"></i>&nbsp;Boats</p></a
			>
		</div>
	</div>
	<div class="tax-toggle">
		<div class="form-check-reverse form-switch">
			<input
				class="form-check-input"
				type="checkbox"
				role="switch"
				id="flexSwitchCheckDefault"
			/>
			<label class="form-check-label" for="flexSwitchCheckDefault"
				>Display total after Taxes</label
			>
		</div>
	</div>
</div>

<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
	<% for(let listing of allListings){ %>
	<a href="/listings/<%=listing._id%>" class="listing-link">
		<div class="card col listing-card">
			<img
				src="<%= listing.image.url %>"
				class="card-img-top"
				alt="listing_image"
				style="height: 20rem"
			/>
			<div class="card-img-overlay"></div>
			<div class="card-body">
				<b><p class="card-text"><%= listing.title %></p></b>
				<p class="card-text">
					&#8377; <%= listing.price.toLocaleString("en-IN") %>/night
					<i class="tax-info"> + 18% GST</i>
					<br />
				</p>
			</div>
		</div>
	</a>
	<% } %>
</div>

<script>
	let taxSwitch = document.getElementById("flexSwitchCheckDefault");
	taxSwitch.addEventListener("click", () => {
		let taxInfo = document.getElementsByClassName("tax-info");
		for (info of taxInfo) {
			if (info.style.display != "inline") {
				info.style.display = "inline";
			} else {
				info.style.display = "none";
			}
		}
	});
</script>
